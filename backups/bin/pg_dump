#!/usr/bin/env bash
set -euo pipefail
outfile=""
declare -a passthrough=()
while [[ $# -gt 0 ]]; do
  case "$1" in
    -f|--file)
      outfile="$2"
      shift 2
      ;;
    *)
      passthrough+=("$1")
      shift
      ;;
  esac
done
if [[ -n "$outfile" ]]; then
  docker exec -i -e PGPASSWORD="$PGPASSWORD" vib-postgres pg_dump "${passthrough[@]}" > "$outfile"
else
  docker exec -i -e PGPASSWORD="$PGPASSWORD" vib-postgres pg_dump "${passthrough[@]}"
fi
