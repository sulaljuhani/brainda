
======================================
SETUP
======================================

[15:11:42] Using base URL: http://localhost:8000
[15:11:42] Waiting for: orchestrator health endpoint (timeout 60s)
[0;32m[15:11:48] âœ“ Condition met after 0s[0m
[0;32m[15:11:53] âœ“ Health endpoint reports healthy (expected=healthy, actual=healthy)[0m

======================================
STAGE 0: INFRASTRUCTURE
======================================

[15:11:53] Running test: infra_containers
[0;32m[15:11:54] âœ“ Container vib-orchestrator running (expected=true, actual=true)[0m
[0;32m[15:11:54] âœ“ Container vib-worker running (expected=true, actual=true)[0m
[0;32m[15:11:55] âœ“ Container vib-beat running (expected=true, actual=true)[0m
[0;32m[15:11:55] âœ“ Container vib-postgres running (expected=true, actual=true)[0m
[0;32m[15:11:56] âœ“ Container vib-redis running (expected=true, actual=true)[0m
[0;32m[15:11:56] âœ“ Container vib-qdrant running (expected=true, actual=true)[0m
[0;32m[15:11:57] âœ“ infra_containers passed (3s)[0m
[15:11:57] Running test: infra_health_status
[0;32m[15:12:02] âœ“ Health endpoint returns 200[0m
[0;32m[15:12:02] âœ“ Health status is healthy (expected=healthy, actual=healthy)[0m
[0;32m[15:12:02] âœ“ infra_health_status passed (5s)[0m
[15:12:02] Running test: infra_health_services
[0;32m[15:12:02] âœ“ Service postgres healthy (expected=ok, actual=ok)[0m
[0;32m[15:12:02] âœ“ Service redis healthy (expected=ok, actual=ok)[0m
[0;32m[15:12:02] âœ“ Service qdrant healthy (expected=ok, actual=ok)[0m
[0;32m[15:12:02] âœ“ Service celery_worker healthy (expected=ok, actual=ok)[0m
[0;32m[15:12:02] âœ“ infra_health_services passed (0s)[0m
[15:12:02] Running test: infra_metrics_endpoint
[0;32m[15:12:02] âœ“ Metrics endpoint returns 200[0m
[0;32m[15:12:02] âœ“ Metrics contain HELP blocks[0m
[0;32m[15:12:02] âœ“ infra_metrics_endpoint passed (0s)[0m
[15:12:02] Running test: infra_metrics_help
[0;32m[15:12:02] âœ“ api_request_duration_seconds metric present[0m
[0;32m[15:12:02] âœ“ infra_metrics_help passed (0s)[0m
[15:12:02] Running test: infra_database
[0;32m[15:12:03] âœ“ Database responds (expected=1, actual=1)[0m
[0;32m[15:12:03] âœ“ infra_database passed (0s)[0m
[15:12:03] Running test: infra_redis
[0;32m[15:12:04] âœ“ Redis responds (expected=PONG, actual=PONG)[0m
[0;32m[15:12:04] âœ“ infra_redis passed (1s)[0m
[15:12:04] Running test: infra_qdrant
[0;32m[15:12:04] âœ“ Qdrant collection available[0m
[0;32m[15:12:04] âœ“ infra_qdrant passed (0s)[0m
[15:12:04] Running test: infra_auth_valid
[0;32m[15:12:08] âœ“ Valid token accepted[0m
[0;32m[15:12:08] âœ“ infra_auth_valid passed (4s)[0m
[15:12:08] Running test: infra_auth_invalid
[0;32m[15:12:08] âœ“ Invalid token rejected[0m
[0;32m[15:12:08] âœ“ infra_auth_invalid passed (0s)[0m
[15:12:08] Running test: infra_auth_missing
[0;32m[15:12:08] âœ“ Missing token rejected[0m
[0;32m[15:12:08] âœ“ infra_auth_missing passed (0s)[0m
[15:12:08] Running test: infra_rate_limit
[0;32m[15:12:11] âœ“ Rate limit triggered (2/32 responses were rate-limited)[0m
[0;32m[15:12:11] âœ“ infra_rate_limit passed (3s)[0m
[15:12:11] Running test: infra_rate_limit_reset
[15:12:11] Waiting 65s for rate limit window to reset
[0;32m[15:13:18] âœ“ Requests succeed after window reset (expected=200, actual=200)[0m
[0;32m[15:13:18] âœ“ infra_rate_limit_reset passed (67s)[0m
[15:13:18] Running test: infra_logs
[0;32m[15:13:19] âœ“ Logs contain timestamp[0m
[0;32m[15:13:19] âœ“ Logs contain endpoint/event[0m
[0;32m[15:13:19] âœ“ infra_logs passed (1s)[0m
[15:13:19] Running test: infra_metrics_increment
[0;32m[15:13:19] âœ“ Metrics updated after request[0m
[0;32m[15:13:19] âœ“ infra_metrics_increment passed (0s)[0m
[15:13:19] Running test: infra_cors
[0;32m[15:13:24] âœ“ CORS header present[0m
[0;32m[15:13:24] âœ“ infra_cors passed (5s)[0m
[15:13:24] Running test: infra_tls
[1;33m[15:13:24] âš  BASE_URL not HTTPS; skipping TLS check[0m
[0;32m[15:13:24] âœ“ infra_tls passed (0s)[0m
[15:13:24] Running test: infra_celery_worker
[0;32m[15:13:37] âœ“ Celery worker responding[0m
[0;32m[15:13:37] âœ“ infra_celery_worker passed (12s)[0m
[15:13:37] Running test: infra_celery_beat
[0;32m[15:13:38] âœ“ Celery beat running[0m
[0;32m[15:13:38] âœ“ infra_celery_beat passed (1s)[0m
[15:13:38] Running test: infra_db_schema
[0;32m[15:13:38] âœ“ DB schema migrated (23 > 10)[0m
[0;32m[15:13:38] âœ“ infra_db_schema passed (0s)[0m
[15:13:39] Running test: infra_metrics_prom
[0;32m[15:13:39] âœ“ Reminder lag histogram exposed[0m
[0;32m[15:13:39] âœ“ infra_metrics_prom passed (0s)[0m
[15:13:39] Running test: infra_qdrant_metric
[0;32m[15:13:39] âœ“ Qdrant gauge exported[0m
[0;32m[15:13:39] âœ“ infra_qdrant_metric passed (0s)[0m

======================================
TEST SUMMARY
======================================

Total Tests: 22
Passed: 22
Failed: 0
Warnings: 1
Duration: 1m 57s
Pass Rate: 100.0%

SLO Status:
  - Reminder fire lag p95: unavailable
  - Push success rate: unavailable
  - Document ingestion p95: unavailable
  - Vector search p95: unavailable

Logs: /tmp/vib-test-20251114-181142/run.log
Artifacts: /tmp/vib-test-20251114-181142
[15:13:39] JSON report: /tmp/vib-test-20251114-181142/results.json
[15:13:39] Cleaning up test data...
[0;32m[15:13:42] âœ“ Cleanup complete[0m
